@page "/register"
@layout EmptyLayout
@using TaskTracker.Blazor.WebApp.Authentication

<MudContainer MaxWidth=@MaxWidth.Small
              Class="d-flex align-center justify-center"
              Style="min-height: 100vh;">

    <MudPaper Elevation="8"
              Class="pa-8"
              Style="width: 100%;">

        <MudText Typo=@Typo.h4
                 Align=@Align.Center
                 GutterBottom=@true>
            <MudIcon Icon=@Icons.Material.Filled.Task
                     Size=@Size.Large /> TaskTracker
        </MudText>

        <MudText Typo=@Typo.h6
                 Align=@Align.Center
                 Class="mb-6">
            Create your account
        </MudText>

        <EditForm Model=@registerModel
                  OnValidSubmit=@HandleRegister>
            <DataAnnotationsValidator />

            <MudTextField @bind-Value=@registerModel.FirstName
                          Label="First Name"
                          Variant=@Variant.Outlined
                          Required=@true
                          RequiredError="First name is required"
                          Class="mb-4" />

            <MudTextField @bind-Value=@registerModel.LastName
                          Label="Last Name"
                          Variant=@Variant.Outlined
                          Required=@true
                          RequiredError="Last name is required"
                          Class="mb-4" />

            <MudTextField @bind-Value=@registerModel.Email
                          Label="Email"
                          Variant=@Variant.Outlined
                          InputType=@InputType.Email
                          Required=@true
                          RequiredError="Email is required"
                          Class="mb-4" />

            <MudTextField @bind-Value=@registerModel.Password
                          Label="Password"
                          Variant=@Variant.Outlined
                          InputType=@InputType.Password
                          Required=@true
                          RequiredError="Password is required"
                          Class="mb-4" />

            <MudButton ButtonType=@ButtonType.Submit
                       Variant=@Variant.Filled
                       Color=@Color.Primary
                       FullWidth=@true
                       Size=@Size.Large
                       Disabled=@isLoading
                       Class="mb-4">
                @if (isLoading)
                {
                    <MudProgressCircular Size=@Size.Small
                                         Indeterminate=@true />
                }
                else
                {
                    <text>Sign Up</text>
                }
            </MudButton>
        </EditForm>

        <MudDivider Class="my-4" />

        <MudText Align=@Align.Center>
            Already have an account?
            <MudLink Href="/login"
                     Color=@Color.Primary>
                Sign in
            </MudLink>
        </MudText>

    </MudPaper>
</MudContainer>

